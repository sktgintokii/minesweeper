(window.webpackJsonpminesweeper=window.webpackJsonpminesweeper||[]).push([[0],{109:function(e,t,n){e.exports=n(174)},114:function(e,t,n){},174:function(e,t,n){"use strict";n.r(t);var r=n(1),a=n.n(r),o=n(3),i=n.n(o),u=(n(114),n(11)),c=n(17),l=n(18),s=n(37),d=n(57);function v(){var e=Object(c.a)(["\n  cursor: pointer;\n  user-select: none;\n  display: block;\n  width: ",";\n  height: ",";\n  background-color: ",";\n  color: black;\n  border: 1px solid black;\n\n  &:hover {\n    background-color: gray;\n  }\n"]);return v=function(){return e},e}var f=l.a.div(v(),(function(e){return e.dimension}),(function(e){return e.dimension}),(function(e){return e.revealed?"gray":"white"})),m=function(e){var t=e.size,n=e.revealed,o=e.marked,i=e.markType,u=e.hasBomb,c=e.bombCount,l=void 0===c?0:c,s=e.onClick,v=e.onRightClick,m=Object(d.a)(e,["size","revealed","marked","markType","hasBomb","bombCount","onClick","onRightClick"]),b=Object(r.useCallback)((function(e){e.preventDefault(),v(e)}),[v]),p=Object(r.useMemo)((function(){return function(e){return"small"===e?"1rem":"medium"===e?"2rem":"large"===e?"3rem":void 0}(t)}),[t]);return a.a.createElement(f,Object.assign({revealed:n,dimension:p,onClick:s,onContextMenu:b},m),n&&!u&&a.a.createElement(a.a.Fragment,null,l>0?l:""),n&&u&&a.a.createElement(a.a.Fragment,null,"\ud83d\udca3"),!n&&!o&&a.a.createElement(a.a.Fragment,null),!n&&o&&a.a.createElement(a.a.Fragment,null,"flag"===i?"\ud83d\udea9":"\u2753"))};m.defaultProps={size:"medium"};var b=m;function p(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function g(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?p(n,!0).forEach((function(t){Object(s.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):p(n).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function h(){var e=Object(c.a)([""]);return h=function(){return e},e}function y(){var e=Object(c.a)(["\n  display: grid;\n  grid-column: ",";\n  grid-row: ",";\n"]);return y=function(){return e},e}var k=l.a.div.attrs((function(e){var t=e.board;return{gridColumn:t[0].length,gridRow:t[0].length}}))(y(),(function(e){return e.board[0].length}),(function(e){return e.board.length})),O=l.a.div.attrs((function(e){var t=e.rowIndex,n=e.columnIndex;return{style:{gridRow:"".concat(t+1," / span 1"),gridColumn:"".concat(n+1," / span 1")}}}))(h()),w=function(e){var t=e.board,n=e.onClick,r=e.onRightClick,o=Object(d.a)(e,["board","onClick","onRightClick"]);return a.a.createElement(k,Object.assign({board:t},o),t.map((function(e,t){return e.map((function(e,o){return a.a.createElement(O,{key:"mine-sweeper-grid-".concat(t,"-").concat(o),rowIndex:t,columnIndex:o},a.a.createElement(b,Object.assign({onClick:function(){return n(g({},e,{rowIndex:t,columnIndex:o}))},onRightClick:function(){return r(g({},e,{rowIndex:t,columnIndex:o}))}},e)))}))})))},j=n(176),C=(n(81),j.a),A=n(175).a,S=n(38),E=n(39);function x(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function P(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?x(n,!0).forEach((function(t){Object(s.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):x(n).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var R=function(){function e(){Object(S.a)(this,e)}return Object(E.a)(e,null,[{key:"initState",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.revealed,n=void 0!==t&&t,r=e.marked,a=void 0!==r&&r,o=e.markType,i=void 0===o?"none":o,u=e.hasBomb,c=void 0!==u&&u,l=e.bombCount,s=void 0===l?0:l;return{revealed:n,marked:a,markType:i,hasBomb:c,bombCount:s}}},{key:"getNextMarkType",value:function(e){return{flag:"question",question:"none",none:"flag"}[e]}},{key:"getNextMarked",value:function(e){return"none"!==this.getNextMarkType(e)}},{key:"reveal",value:function(e){return P({},e,{revealed:!0,flag:"none",marked:!1})}},{key:"mark",value:function(e){return P({},e,{marked:this.getNextMarked(e.markType),markType:this.getNextMarkType(e.markType)})}},{key:"hasBomb",value:function(e){return e.hasBomb}},{key:"canReveal",value:function(e){return!e.revealed}},{key:"canAutoReveal",value:function(e){return!e.revealed&&!e.marked&&0===e.bombCount}}]),e}(),B=function(){function e(){Object(S.a)(this,e)}return Object(E.a)(e,null,[{key:"initBoardState",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.rowCount,n=void 0===t?0:t,r=e.columnCount,a=void 0===r?0:r,o=e.bombCount,i=void 0===o?0:o,u=this.initBombsState(n,a,i);return this.generateState(n,a,(function(e,t){var n=u[e][t],r=n.hasBomb,a=n.bombCount;return R.initState({revealed:!1,marked:!1,markType:"none",hasBomb:r,bombCount:a})}))}},{key:"getAutoRevealPositions",value:function(e,t,n){var r=this,a=(this.getGridStateAt(e,t,n),this.getBoardSizes(e)),o=a.rowCount,i=a.columnCount,c=[],l=[[t,n]],s=[],d=function(e,t){return c.find((function(n){var r=Object(u.a)(n,2),a=r[0],o=r[1];return a===e&&o===t}))};do{s=[];var v=!0,f=!1,m=void 0;try{for(var b,p=l[Symbol.iterator]();!(v=(b=p.next()).done);v=!0){var g=b.value,h=Object(u.a)(g,2),y=h[0],k=h[1];if(!d(y,k)){var O=this.getGridStateAt(e,y,k);s=R.canAutoReveal(O)?s.concat(this.getSurroundingDirectionsAt(y,k,o,i).filter((function(t){var n=Object(u.a)(t,2),a=n[0],o=n[1],i=r.getGridStateAt(e,a,o);return!d(a,o)&&!R.hasBomb(i)}))):s,c.push([y,k])}}}catch(w){f=!0,m=w}finally{try{v||null==p.return||p.return()}finally{if(f)throw m}}l=s}while(s.length);return c}},{key:"revealAt",value:function(e,t,n){var r=this.getAutoRevealPositions(e,t,n);return this.updateGridStateAt(e,t,n,(function(e){return R.reveal(e)}),(function(e,a){return e===t&&a===n||!!r.find((function(t){var n=Object(u.a)(t,2),r=n[0],o=n[1];return r===e&&o===a}))}))}},{key:"markAt",value:function(e,t,n){return this.updateGridStateAt(e,t,n,(function(e){return R.mark(e)}))}},{key:"hasUnrevealedGrids",value:function(e){return e.some((function(e){return e.some((function(e){return R.canReveal(e)}))}))}},{key:"hasBombAt",value:function(e,t,n){var r=this.getGridStateAt(e,t,n);return R.hasBomb(r)}},{key:"getGridStateAt",value:function(e,t,n){return e[t][n]}},{key:"canRevealAt",value:function(e,t,n){var r=this.getGridStateAt(e,t,n);return R.canReveal(r)}},{key:"initBombsState",value:function(e,t,n){var r=this,a=new Set(Array(e*t).fill().map((function(e,t){return{index:t,value:Math.random()}})).sort((function(e,t){return t.value-e.value})).slice(0,n).map((function(e){return e.index}))),o=function(e,n){return a.has(e*t+n)};return this.generateState(e,t,(function(n,a){return{hasBomb:o(n,a),bombCount:(i=n,c=a,r.getSurroundingDirectionsAt(i,c,e,t).reduce((function(e,t){var n=Object(u.a)(t,2),r=n[0],a=n[1];return e+(o(r,a)?1:0)}),0))};var i,c}))}},{key:"generateState",value:function(e,t,n){return Array(e).fill().map((function(e,r){return Array(t).fill().map((function(e,t){return n(r,t)}))}))}},{key:"isInbound",value:function(e,t,n,r){return e>=0&&e<n&&t>=0&&t<r}},{key:"getSurroundingDirectionsAt",value:function(e,t,n,r){var a=this;return[[e-1,t],[e-1,t+1],[e,t+1],[e+1,t+1],[e+1,t],[e+1,t-1],[e,t-1],[e-1,t-1]].filter((function(e){var t=Object(u.a)(e,2),o=t[0],i=t[1];return a.isInbound(o,i,n,r)}))}},{key:"getBoardSizes",value:function(e){return{rowCount:e.length,columnCount:e[0].length}}}]),e}();B.updateGridStateAt=function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:function(e){return e},a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:function(e,r){return e===t&&r===n};return e.map((function(e,t){return e.map((function(e,n){return a(t,n)?r(e,t,n):e}))}))};var I=B;function D(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function G(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?D(n,!0).forEach((function(t){Object(s.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):D(n).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var T=function(){function e(){Object(S.a)(this,e)}return Object(E.a)(e,null,[{key:"initGameState",value:function(e){var t=e.level,n=void 0===t?"expert":t,r=e.hasEnded;return{level:n,hasEnded:void 0!==r&&r,result:e.result,boardState:I.initBoardState(this.boardConfigs[n])}}},{key:"revealAt",value:function(e,t,n){var r=e.boardState,a=I.canRevealAt(r,t,n),o=I.canRevealAt(r,t,n),i=this.hasEndedIfReviewAt(e,t,n);return!a||e.hasEnded?e:G({},e,{hasEnded:i,result:i?o?this.results.lost:this.results.win:void 0,boardState:I.revealAt(r,t,n)})}},{key:"markAt",value:function(e,t,n){return e.hasEnded?e:G({},e,{boardState:I.markAt(e.boardState,t,n)})}},{key:"hasEndedIfReviewAt",value:function(e,t,n){var r=I.hasBombAt(e.boardState,t,n),a=I.hasUnrevealedGrids(e.boardState);return r||!a}}]),e}();T.boardConfigs={expert:{rowCount:16,columnCount:30,bombCount:99},intermediate:{rowCount:16,columnCount:16,bombCount:40},beginner:{rowCount:10,columnCount:10,bombCount:10}},T.results={win:"win",lost:"lost"};var M=T,z=function(e,t){switch(t.type){case"revealAt":return M.revealAt(e,t.atRow,t.atColumn);case"markAt":return M.markAt(e,t.atRow,t.atColumn);case"restart":return M.initGameState({level:t.level})}},N=function(e){var t=M.initGameState({level:e}),n=Object(r.useReducer)(z,t),a=Object(u.a)(n,2),o=a[0],i=a[1];return[o,{revealAt:function(e,t){i({type:"revealAt",atRow:e,atColumn:t})},markAt:function(e,t){i({type:"markAt",atRow:e,atColumn:t})},restart:function(e){i({type:"restart",level:e})}}]};function F(){var e=Object(c.a)(["\n  > * {\n    margin: 0 1rem;\n    min-width: 10rem;\n  }\n"]);return F=function(){return e},e}function q(){var e=Object(c.a)(["\n  font-size: calc(16px + 2vmin);\n  margin-bottom: 1rem;\n"]);return q=function(){return e},e}function J(){var e=Object(c.a)(["\n  text-align: center;\n  min-height: 100vh;\n  background-color: #282c34;\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  justify-content: center;\n  color: white;\n  font-size: calc(10px + 2vmin);\n  overflow: auto;\n"]);return J=function(){return e},e}var U=l.a.div(J()),W=l.a.header(q()),V=l.a.div(F()),$=function(){var e=N(),t=Object(u.a)(e,2),n=t[0],r=t[1],o=r.revealAt,i=r.markAt,c=r.restart;return a.a.createElement(U,{className:"App"},a.a.createElement(W,{className:"App-header"},a.a.createElement("div",null,"Minesweeper"),a.a.createElement(V,null,a.a.createElement(A,{defaultValue:n.level,onChange:c},a.a.createElement(A.Option,{value:"expert"},"Expert"),a.a.createElement(A.Option,{value:"intermediate"},"Intermediate"),a.a.createElement(A.Option,{value:"beginner"},"Beginner")),a.a.createElement(C,{onClick:function(){return c(n.level)}},n.result||"Restart"))),a.a.createElement(w,{board:n.boardState,onClick:function(e){var t=e.rowIndex,n=e.columnIndex;return o(t,n)},onRightClick:function(e){var t=e.rowIndex,n=e.columnIndex;return i(t,n)}}))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));i.a.render(a.a.createElement($,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))}},[[109,1,2]]]);
//# sourceMappingURL=main.588ffec4.chunk.js.map